<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Parking Search</title>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!--&lt;!&ndash; Latest compiled and minified CSS &ndash;&gt;-->
    <!--<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">-->

    <!--&lt;!&ndash; Optional theme &ndash;&gt;-->
    <!--<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">-->

    <!--&lt;!&ndash; Latest compiled and minified JavaScript &ndash;&gt;-->
    <!--<script src="//netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>-->

    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>

<div id="map" style="width: 1345px; height: 660px"></div>

<script type="text/javascript">
    ymaps.ready(init);
    var myMap, parking;

    function init() {
        var BalloonClass = ymaps.templateLayoutFactory.createClass(
//            '<h3></h3>' +
//            '<p>Описание: </p>' +
//            '<p>Население:</p>' +
//            '<p>Метрополитен: </p>'

//                '<img src="http://img-fotki.yandex.ru/get/6114/82599242.2d6/0_88b97_ec425cf5_M" />'
        );

       var geolocation = ymaps.geolocation,
                myMap = new ymaps.Map("map", {
                    center: [50.4501, 30.5234],
                    zoom: 12
                },{
            searchControlProvider: 'yandex#search'
        });

        Park = new ymaps.GeoObjectCollection({}, {
            preset: 'island#redIcon'
        });
        var coord = []
        {% for i in data%}
        var temp = []
        temp.push({{ i.latitude }}, {{ i.longitude }})
        coord.push(temp)
        {% endfor %}

//        for (var i = 0; i < coord.length; i++) {
//            var placeMark = new ymaps.Placemark(coord[i], data);
//            Park.add(placeMark);
//        }
        for (var i = 0; i < coord.length; i++) {
            Park.add(new ymaps.Placemark(coord[i], {
                balloonContentHeader: "Назва парковки",
                balloonContentBody:
                '<div class="container">' +
                    '<div class="price">' +
                        '<span>Цена</span>' +
                        '<span>20грн</span>' +
                    '</div>' +
                    '<div class="telephone">' +
                        '<span>Телефон</span>' +
                        '<span>0956266849</span>' +
                    '</div>' +
                    '<div class="places">' +
                        '<span>Місць</span>' +
                        '<span>20</span>' +
                    '</div>' +
                    '<div class="email">' +
                        '<span>Пошта</span>' +
                        '<span>Example@gmail.com</span>' +
                    '</div>' +
                '</div>'

            },{
                preset: "islands#redStretchyIcon",
                balloonCloseButton: true,
                hideIconOnBalloonOpen: false
            }));
        }
        //get browser myLocation
        geolocation.get({
            provider: 'browser',
            mapStateAutoApply: true
        }).then(function (result) {
        // Синим цветом пометим положение, полученное через браузер.

            result.geoObjects.options.set('preset', 'islands#blueCircleIcon');
            myMap.geoObjects.add(result.geoObjects);
        });

        myMap.controls
                .add('zoomControl', { position: { left: 160, top: 50 } });
        myMap.geoObjects.add(Park);


    }

</script>

</body>
</html>